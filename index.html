<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>彭水实时热力图（密集模拟）</title>
  <style>
    html, body, #container {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    #legend {
      position: absolute;
      bottom: 20px;
      left: 20px;
      background: rgba(255,255,255,0.95);
      padding: 12px 16px;
      font-size: 14px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.15);
      line-height: 1.8;
    }
    #logo {
      position: absolute;
      top: 12px;
      left: 12px;
      z-index: 1000;
    }
    #logo img {
      height: 40px;
    }
  </style>
</head>
<body>
  <div id="container"></div>
  <div id="logo">
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Heatmap_icon.svg/120px-Heatmap_icon.svg.png" alt="Logo">
  </div>
  <div id="legend">
    <strong>热力等级说明：</strong><br>
    🔥 90-100：非常热门<br>
    🌡️ 70-89：较热<br>
    🌀 50-69：一般<br>
    ❄️ <50：较冷
  </div>
  <script src="https://webapi.amap.com/maps?v=2.0&key=152e6b497fa8bdf8cef2b7c6880d34d3&plugin=AMap.HeatMap"></script>
  <script>
    var map = new AMap.Map('container', {
      resizeEnable: true,
      zoom: 12,
      center: [108.1666, 29.2935],
      zooms: [10, 18]
    });
    var heatmap;
    AMap.plugin(["AMap.HeatMap", "AMap.ToolBar"], function () {
      map.addControl(new AMap.ToolBar());
      heatmap = new AMap.HeatMap(map, {
        radius: 25,
        opacity: [0.3, 0.9]
      });
      loadHeatData();
      setInterval(loadHeatData, 30000);
    });
    function loadHeatData() {
      fetch('heatmap-data.json?t=' + Date.now())
        .then(res => res.json())
        .then(data => {
          heatmap.setDataSet({
            data: data,
            max: 100
          });
        })
        .catch(err => {
          console.error("热力数据加载失败", err);
        });
    }
  </script>
</body>
</html>